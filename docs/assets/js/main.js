"use strict";const ulCharacters=document.querySelector(".js-list-characters"),ulfavourites=document.querySelector(".js-favourites-list"),btnSearch=document.querySelector(".js-btn-search"),inputTextSearch=document.querySelector(".js-input-search"),btnRemoveFav=document.querySelector(".js-btn-remove"),btnResetFav=document.querySelector(".js-favs-reset"),titleSectionFav=document.querySelector(".js-fav-title");let listCharacters=[],favCharacters=[];function getData(){fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{listCharacters=e,renderAllCharacters(listCharacters)})}getData();const saveFavouritesChar=JSON.parse(localStorage.getItem("favChar"));function renderAllCharacters(e){let a="";a=-1===favCharacters.findIndex(a=>a.char_id===e.char_id)?"":"selected";let t="";for(const r of e)t+=`<li class="character js-card-character ${a}" id="${r.char_id}">`,t+=`<img class="character__img" src="${r.img}" alt="">`,t+=`<h4 class="character__name">${r.name}</h4>`,t+=`<p class="character__status">${r.status}</p>`,t+="</li>";ulCharacters.innerHTML=t,listenerEachChar()}function renderFavCharacters(){let e="";for(const a of favCharacters)e+=`<li class="character js-card-characte" id="${a.char_id}">`,e+=`<img class="character__img" src="${a.img}" alt="">`,e+=`<h4 class="character__name">${a.name}</h4>`,e+=`<p class="character__status">${a.status}</p>`,e+='<button class="btn-remove js-btn-remove" type="reset">X</button>',e+="</li>";ulfavourites.innerHTML=e}function handleClick(e){const a=e.currentTarget.id,t=listCharacters.find(e=>e.char_id===parseInt(a)),r=favCharacters.findIndex(e=>e.char_id===parseInt(a));-1===r?(e.currentTarget.classList.add("selected"),favCharacters.push(t),localStorage.setItem("favChar",JSON.stringify(favCharacters)),titleSectionFav.classList.add("hidden")):(e.currentTarget.classList.remove("selected"),favCharacters.splice(r,1),localStorage.setItem("favChar",JSON.stringify(favCharacters))),renderFavCharacters()}function listenerEachChar(){const e=document.querySelectorAll(".js-card-character");for(const a of e)a.addEventListener("click",handleClick)}null!==saveFavouritesChar&&(favCharacters=saveFavouritesChar,renderFavCharacters()),btnSearch.addEventListener("click",e=>{e.preventDefault();const a=inputTextSearch.value.toLowerCase();renderAllCharacters(listCharacters.filter(e=>e.name.toLowerCase().includes(a))),console.log(a)}),inputTextSearch.addEventListener("input",()=>{renderAllCharacters(listCharacters)}),btnResetFav.addEventListener("click",e=>{e.preventDefault(),localStorage.removeItem("favChar"),favCharacters.length=0,renderFavCharacters(favCharacters),titleSectionFav.classList.remove("hidden")});